<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering Mock Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin: 0 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff87, #60efff);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .test-area {
            padding: 40px;
        }

        .question-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #3498db;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin: 20px 0;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
        }

        .option:hover {
            border-color: #3498db;
            background: #f8f9ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }

        .option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .option.correct {
            border-color: #27ae60;
            background: #d5f4e6;
            animation: correctPulse 0.6s ease;
        }

        .option.incorrect {
            border-color: #e74c3c;
            background: #fdeaea;
            animation: incorrectShake 0.6s ease;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .option-letter {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option.correct .option-letter {
            background: #27ae60;
        }

        .option.incorrect .option-letter {
            background: #e74c3c;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .results {
            text-align: center;
            padding: 40px;
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .score-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .score-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            border-top: 4px solid #3498db;
        }

        .score-card.correct {
            border-top-color: #27ae60;
        }

        .score-card.incorrect {
            border-top-color: #e74c3c;
        }

        .score-card.skipped {
            border-top-color: #f39c12;
        }

        .score-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .start-screen {
            text-align: center;
            padding: 60px 40px;
        }

        .start-screen h2 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .test-info {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
        }

        .test-info ul {
            list-style: none;
            padding: 0;
        }

        .test-info li {
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .test-info li:last-child {
            border-bottom: none;
        }

        .info-icon {
            width: 20px;
            height: 20px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 2em;
            }

            .test-area {
                padding: 20px;
            }

            .progress-info {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .controls {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                width: 100%;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Engineering Mock Test</h1>
            <div id="progressInfo" class="progress-info hidden">
                <div>Page <span id="currentPage">1</span> of 6</div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <div>Score: <span id="currentScore">0</span></div>
            </div>
        </div>

        <div id="startScreen" class="start-screen">
            <h2>Welcome to the Engineering Mock Test</h2>
            <div class="test-info">
                <ul>
                    <li>
                        <div class="info-icon">📝</div>
                        <div><strong>Total Questions:</strong> 60 MCQs covering various engineering topics</div>
                    </li>
                    <li>
                        <div class="info-icon">📄</div>
                        <div><strong>Format:</strong> 10 questions per page (6 pages total)</div>
                    </li>
                    <li>
                        <div class="info-icon">✅</div>
                        <div><strong>Scoring:</strong> +1 mark for correct answer</div>
                    </li>
                    <li>
                        <div class="info-icon">❌</div>
                        <div><strong>Negative Marking:</strong> -0.2 marks for wrong answer (5 wrong = -1 mark)</div>
                    </li>
                    <li>
                        <div class="info-icon">⏭️</div>
                        <div><strong>Skip Option:</strong> Skip questions you're unsure about</div>
                    </li>
                    <li>
                        <div class="info-icon">🔄</div>
                        <div><strong>Random Order:</strong> Questions shuffled on each refresh</div>
                    </li>
                    <li>
                        <div class="info-icon">💡</div>
                        <div><strong>Instant Feedback:</strong> Correct (green), Wrong (red)</div>
                    </li>
                </ul>
            </div>
            <button class="btn btn-primary" onclick="startTest()" style="font-size: 1.2em; padding: 15px 40px;">
                🚀 Start Test
            </button>
        </div>

        <div id="testArea" class="test-area hidden">
            <div id="questionContainer" class="question-container">
                <!-- Questions will be loaded here -->
            </div>
            <div class="controls">
                <button id="skipBtn" class="btn btn-warning" onclick="skipQuestion()">
                    ⏭️ Skip Question
                </button>
                <div>
                    <button id="prevBtn" class="btn btn-secondary" onclick="previousPage()" disabled>
                        ⬅️ Previous
                    </button>
                    <button id="nextBtn" class="btn btn-primary" onclick="nextPage()" disabled>
                        ${currentPage === 5 ? 'Finish Test' : 'Next ➡️'}
                    </button>
                </div>
            </div>
        </div>

        <div id="resultsArea" class="results hidden">
            <h2>🎉 Test Complete!</h2>
            <div id="scoreDisplay" class="score-display"></div>
            <div id="scoreBreakdown" class="score-breakdown"></div>
            <button class="btn btn-primary" onclick="restartTest()" style="margin-top: 30px;">
                🔄 Take Test Again
            </button>
        </div>
    </div>

    <script>
        const questions = [
            { q: "What is the primary function of a clutch in a vehicle?", options: ["To increase speed", "To engage and disengage power", "To store fuel", "To cool the engine"], answer: 1, explanation: "The clutch connects or disconnects the engine from the transmission for smooth gear changes." }, // Easy - Automobiles
            { q: "Which law governs the pressure distribution in a static fluid?", options: ["Pascal's law", "Bernoulli's principle", "Archimedes' principle", "Newton's law"], answer: 0, explanation: "Pascal's law states that pressure applied to a confined fluid is transmitted equally in all directions." }, // Easy - Fluid Mechanics
            { q: "What is the latent heat of vaporization for water at 100°C?", options: ["540 cal/g", "2260 J/g", "334 J/g", "1000 cal/g"], answer: 1, explanation: "Water's latent heat of vaporization is approximately 2260 J/g at 100°C." }, // Easy - Thermodynamics
            { q: "Which material is used to make cutting tools due to its hardness?", options: ["Aluminum", "Tungsten carbide", "Copper", "Lead"], answer: 1, explanation: "Tungsten carbide is prized for its hardness and wear resistance in cutting tools." }, // Easy - Material Science
            { q: "What is the purpose of a purchase order in record keeping?", options: ["To design parts", "To request goods or services", "To maintain tools", "To schedule work"], answer: 1, explanation: "A purchase order formally requests goods or services from a supplier." }, // Easy - Record Keeping
            { q: "Which safety device protects against loud noises?", options: ["Earplugs", "Gloves", "Goggles", "Hard hat"], answer: 0, explanation: "Earplugs reduce noise exposure, protecting hearing in noisy environments." }, // Easy - Safety Practice
            { q: "What is the purpose of a condition monitoring system?", options: ["To increase costs", "To detect equipment faults early", "To reduce staff", "To eliminate tools"], answer: 1, explanation: "Condition monitoring tracks equipment health to prevent unexpected failures." }, // Easy - Maintenance
            { q: "Which tool is used to draw horizontal lines in technical drawing?", options: ["T-square", "Compass", "Protractor", "Divider"], answer: 0, explanation: "A T-square ensures accurate horizontal lines along a drawing board edge." }, // Easy - Workshop & Drawing
            { q: "What is the purpose of a cost-benefit analysis?", options: ["To design structures", "To compare project costs and benefits", "To measure strength", "To calculate speed"], answer: 1, explanation: "Cost-benefit analysis evaluates if a project's benefits outweigh its costs." }, // Easy - Engg Eco
            { q: "Which instrument measures the velocity of a fluid?", options: ["Pitot tube", "Thermometer", "Barometer", "Hygrometer"], answer: 0, explanation: "A Pitot tube measures fluid velocity by detecting dynamic pressure." }, // Easy - Fluid Mechanics
            { q: "What is the function of a piston in an engine?", options: ["To store fuel", "To compress and transmit power", "To cool the engine", "To generate electricity"], answer: 1, explanation: "The piston compresses the air-fuel mixture and transmits power to the crankshaft." }, // Easy - Heat Engine
            { q: "Which type of force causes twisting in a shaft?", options: ["Compression", "Tension", "Torsion", "Shear"], answer: 2, explanation: "Torsion force twists a shaft, inducing rotational stress." }, // Easy - Engg Mechanics
            { q: "What is the purpose of a drill bit in machining?", options: ["To measure dimensions", "To create holes", "To smooth surfaces", "To cut threads"], answer: 1, explanation: "A drill bit removes material to create precise holes in a workpiece." }, // Easy - Workshop & Drawing
            { q: "Which component stores electrical energy in a car?", options: ["Battery", "Alternator", "Starter", "Radiator"], answer: 0, explanation: "The battery stores electrical energy to power the car's electrical systems." }, // Easy - Automobiles
            { q: "What is the maximum casual leave under TU 2050 Rules?", options: ["5 days", "10 days", "15 days", "20 days"], answer: 1, explanation: "Casual leave is limited to 10 days per year under TU 2050 Rules." }, // Easy - TU 2050 Rules
            { q: "Which gear system is used in differential mechanisms?", options: ["Spur gear", "Bevel gear", "Helical gear", "Worm gear"], answer: 1, explanation: "Bevel gears are used in differentials to change the direction of power transmission." }, // Mid-Hard - Automobiles
            { q: "What is the continuity equation in fluid dynamics?", options: ["Q = A1v1 = A2v2", "P + ½ρv² + ρgh = constant", "F = ma", "Q = Cd·A·√(2gh)"], answer: 0, explanation: "The continuity equation (Q = A1v1 = A2v2) ensures mass conservation in fluid flow." }, // Mid-Hard - Fluid Mechanics
            { q: "Which process increases the entropy of a system?", options: ["Isothermal compression", "Adiabatic expansion", "Isentropic process", "Reversible cycle"], answer: 1, explanation: "Adiabatic expansion increases entropy due to irreversible energy dispersion." }, // Mid-Hard - Thermodynamics
            { q: "What is the purpose of annealing in metal treatment?", options: ["To increase hardness", "To relieve internal stresses", "To remove impurities", "To harden surface"], answer: 1, explanation: "Annealing softens metal and relieves internal stresses from prior processing." }, // Mid-Hard - Material Science
            { q: "Which method uses oil analysis in maintenance?", options: ["Vibration analysis", "Lubricant analysis", "Thermal imaging", "Ultrasonic testing"], answer: 1, explanation: "Oil analysis detects wear particles and contamination in machinery lubricants." }, // Mid-Hard - Maintenance
            { q: "What is the purpose of a title block in technical drawing?", options: ["To add colors", "To provide drawing details", "To measure dimensions", "To draw curves"], answer: 1, explanation: "A title block includes details like title, scale, and date on a drawing." }, // Mid-Hard - Workshop & Drawing
            { q: "Which factor affects the internal rate of return (IRR)?", options: ["Project duration", "Cash flow timing", "Interest rate", "All of the above"], answer: 3, explanation: "IRR is influenced by project duration, cash flow timing, and interest rates." }, // Mid-Hard - Engg Eco
            { q: "What is the critical velocity in pipe flow?", options: ["Velocity at which flow becomes turbulent", "Maximum velocity", "Minimum velocity", "Average velocity"], answer: 0, explanation: "Critical velocity marks the transition from laminar to turbulent flow, often at Re ≈ 2000." }, // Hard - Fluid Mechanics
            { q: "Which cycle is used in steam power plants?", options: ["Otto cycle", "Rankine cycle", "Diesel cycle", "Brayton cycle"], answer: 1, explanation: "The Rankine cycle is optimized for steam-based power generation." }, // Hard - Heat Engine
            { q: "What is the maximum bending stress in a beam?", options: ["σ = Mc/I", "σ = F/A", "σ = τr/J", "σ = P/L"], answer: 0, explanation: "Maximum bending stress is given by σ = Mc/I, where M is moment, c is distance, and I is moment of inertia." }, // Hard - Engg Mechanics
            { q: "Which process improves the fatigue resistance of steel?", options: ["Tempering", "Case hardening", "Annealing", "Normalizing"], answer: 1, explanation: "Case hardening adds a hard surface layer, enhancing fatigue resistance." }, // Hard - Material Science
            { q: "What is the change in enthalpy in an isentropic process?", options: ["Depends on pressure", "Zero", "Equal to heat added", "Equal to work done"], answer: 0, explanation: "In an isentropic process, enthalpy change depends on pressure and temperature, not zero." }, // Hard - Thermodynamics
            { q: "Which safety regulation requires personal protective equipment (PPE)?", options: ["ISO 14001", "OSHA standards", "TU 2050 Rules", "ISO 9001"], answer: 1, explanation: "OSHA standards mandate the use of PPE to protect workers." }, // Hard - Safety Practice
            { q: "What is the purpose of a torque converter in an automatic transmission?", options: ["To change gears", "To transmit power without direct connection", "To store energy", "To reduce weight"], answer: 1, explanation: "A torque converter uses fluid coupling to transmit power smoothly." }, // Easy - Automobiles
            { q: "Which property affects the viscosity of a fluid?", options: ["Density", "Temperature", "Color", "Shape"], answer: 1, explanation: "Viscosity decreases as temperature increases for most fluids." }, // Easy - Fluid Mechanics
            { q: "What is the function of an evaporator in a refrigeration cycle?", options: ["To release heat", "To absorb heat", "To compress gas", "To expand liquid"], answer: 1, explanation: "The evaporator absorbs heat from the surroundings, cooling the space." }, // Easy - Heat Engine
            { q: "Which test evaluates a material's toughness?", options: ["Tensile test", "Charpy impact test", "Hardness test", "Fatigue test"], answer: 1, explanation: "The Charpy test measures a material's ability to absorb energy under impact." }, // Easy - Material Science
            { q: "What is the purpose of a receipt in record keeping?", options: ["To design machines", "To confirm payment", "To maintain tools", "To schedule work"], answer: 1, explanation: "A receipt serves as proof of payment or goods received." }, // Easy - Record Keeping
            { q: "Which safety practice prevents electrical hazards?", options: ["Wearing gloves", "Using grounded tools", "Using earplugs", "Wearing goggles"], answer: 1, explanation: "Grounded tools prevent electrical shocks by safely dissipating current." }, // Easy - Safety Practice
            { q: "What is the purpose of a preventive maintenance checklist?", options: ["To increase downtime", "To ensure all tasks are completed", "To reduce costs", "To eliminate inspections"], answer: 1, explanation: "A checklist ensures all preventive maintenance tasks are systematically performed." }, // Easy - Maintenance
            { q: "Which tool is used to draw perpendicular lines?", options: ["Set square", "Compass", "Ruler", "Protractor"], answer: 0, explanation: "A set square creates accurate perpendicular lines in technical drawing." }, // Easy - Workshop & Drawing
            { q: "What is the purpose of a payback period analysis?", options: ["To design bridges", "To determine investment recovery time", "To measure strength", "To calculate speed"], answer: 1, explanation: "Payback period calculates the time to recover an investment's initial cost." }, // Easy - Engg Eco
            { q: "Which component controls the air intake in a diesel engine?", options: ["Carburetor", "Turbocharger", "Throttle valve", "Injector"], answer: 1, explanation: "A turbocharger increases air intake for better combustion in diesel engines." }, // Easy - Heat Engine
            { q: "What is the primary function of a strut in a structure?", options: ["To resist compression", "To store water", "To generate power", "To measure height"], answer: 0, explanation: "A strut supports compressive loads in a structural framework." }, // Easy - Engg Mechanics
            { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कति दिनको पर्व विदा हुन्छ?", options: ["७ दिन", "१० दिन", "१५ दिन", "२० दिन"], answer: 1, explanation: "१० दिनको पर्व विदा दिइन्छ।" }, // Easy - TU 2050 Rules
            { q: "त्रिभुवन विश्वविद्यालयमा कुन विदा बिरामी विदासँग जोडिन्छ?", options: ["घर विदा", "प्रसूति विदा", "अध्ययन विदा", "आकस्मिक विदा"], answer: 3, explanation: "आकस्मिक विदा बिरामी विदासँग जोडिन्छ।" }, // Easy - TU 2050 Rules
            { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कति प्रकारको विदा हुन्छ?", options: ["४", "५", "६", "७"], answer: 1, explanation: "५ प्रकारको विदा हुन्छ।" }, // Mid-Hard - TU 2050 Rules
            { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कुन समूहको वरियता दोस्रो छ?", options: ["प्रशिक्षण समूह", "प्रशासन समूह", "प्राविधिक समूह", "लेखा समूह"], answer: 1, explanation: "प्रशासन समूहको वरियता दोस्रो छ।" }, // Mid-Hard - TU 2050 Rules
            { q: "त्रिभुवन विश्वविद्यालयमा कति वर्षको सेवा अवधि पछि विशेष सुविधा पाइन्छ?", options: ["१० वर्ष", "१५ वर्ष", "२० वर्ष", "२५ वर्ष"], answer: 2, explanation: "२० वर्षपछि विशेष सुविधा पाइन्छ।" }, // Hard - TU 2050 Rules
            { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कुन निकायले छुट्टी स्वीकृत गर्छ?", options: ["रजिष्ट्रार", "कार्यकारी परिषद्", "सेवा आयोग", "उपकुलपति"], answer: 0, explanation: "रजिष्ट्रारले छुट्टी स्वीकृत गर्छ।" }, // Hard - TU 2050 Rules
            { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कति दिनको आकस्मिक विदा हुन्छ?", options: ["५ दिन", "१० दिन", "१५ दिन", "२० दिन"], answer: 1, explanation: "१० दिनको आकस्मिक विदा हुन्छ।" }, // Easy - TU 2050 Rules
              { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कुन समूहको वरियता पहिलो छ?", options: ["प्रशिक्षण समूह", "प्रशासन समूह", "प्राविधिक समूह", "लेखा समूह"], answer: 0, explanation: "प्रशिक्षण समूहको वरियता पहिलो छ।" },
      { q: "कति दिनको असाधारण विदा दिइन्छ?", options: ["५ दिन", "१० दिन", "१५ दिन", "२० दिन"], answer: 1, explanation: "१० दिनको असाधारण विदा दिइन्छ।" },
      { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कुन निकायले विदा स्वीकृत गर्छ?", options: ["रजिष्ट्रार", "विभाग प्रमुख", "कार्यकारी परिषद्", "सेवा आयोग"], answer: 1, explanation: "विभाग प्रमुखले विदा स्वीकृत गर्छ।" },
      { q: "कुन पदमा नियुक्तिका लागि लिखित परीक्षा र साक्षात्कार दुवै आवश्यक छ?", options: ["सहायक स्तर", "अधिकृत स्तर", "सहसचिव स्तर", "सबै"], answer: 3, explanation: "सबै पदमा दुवै आवश्यक छ।" },
      { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कुन विदाको लागि चिकित्सा प्रमाणपत्र आवश्यक पर्छ?", options: ["पर्व विदा", "बिरामी विदा", "घर विदा", "अध्ययन विदा"], answer: 1, explanation: "बिरामी विदाका लागि प्रमाणपत्र चाहिन्छ।" },
      { q: "त्रिभुवन विश्वविद्यालयको नियमावलीको परिच्छेदले विदाको व्यवस्था गर्छ?", options: ["परिच्छेद १", "परिच्छेद ४", "परिच्छेद ६", "परिच्छेद १०"], answer: 1, explanation: "परिच्छेद ४ मा विदाको व्यवस्था छ।" },
      { q: "एक कर्मचारीले १५ दिनको बिरामी विदा लिएको छ र थप १० दिनको आवश्यकता परेमा कसले विस्तार स्वीकृत गर्छ?", options: ["रजिष्ट्रार", "विभाग प्रमुख", "चिकित्सकको सिफारिसमा प्रमुख", "कार्यकारी परिषद्"], answer: 2, explanation: "चिकित्सकको सिफारिसमा प्रमुखले स्वीकृत गर्छ।" },
     
        ];

        let shuffledQuestions = [];
        let currentPage = 0;
        let userAnswers = {};
        let score = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let skippedQuestions = 0;
        const questionsPerPage = 10;
        const totalPages = 6;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startTest() {
            shuffledQuestions = shuffleArray([...questions]);
            currentPage = 0;
            userAnswers = {};
            score = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            skippedQuestions = 0;

            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testArea').classList.remove('hidden');
            document.getElementById('progressInfo').classList.remove('hidden');
            loadPage();
        }

        function loadPage() {
            const startIndex = currentPage * questionsPerPage;
            const endIndex = Math.min(startIndex + questionsPerPage, shuffledQuestions.length);
            let html = '';
            for (let i = startIndex; i < endIndex; i++) {
                const q = shuffledQuestions[i];
                html += `
                    <div class="question-container" id="question-${i}">
                        <div class="question-header">
                            <div class="question-number">Question ${i + 1}</div>
                        </div>
                        <div class="question-text">${q.q}</div>
                        <div class="options-container">
                            ${q.options.map((opt, idx) => `
                                <div class="option" onclick="selectOption(${i}, ${idx})" id="option-${i}-${idx}">
                                    <div class="option-letter">${String.fromCharCode(65 + idx)}</div>
                                    <div>${opt}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="explanation" id="explanation-${i}">
                            <h4>💡 Explanation:</h4>
                            <p>${q.explanation}</p>
                        </div>
                    </div>
                `;
            }

            document.getElementById('questionContainer').innerHTML = html;
            updateProgress();
            updateScore();
            updateNavigationButtons();
        }

        function selectOption(questionIndex, optionIndex) {
            const question = shuffledQuestions[questionIndex];
            const isCorrect = optionIndex === question.answer;

            userAnswers[questionIndex] = optionIndex;

            const options = document.querySelectorAll(`#question-${questionIndex} .option`);
            options.forEach((opt, idx) => {
                opt.classList.remove('selected', 'correct', 'incorrect', 'disabled');
                if (idx === optionIndex) opt.classList.add('selected');
                if (idx === question.answer) opt.classList.add('correct');
                else if (idx === optionIndex && !isCorrect) opt.classList.add('incorrect');
                opt.classList.add('disabled');
            });

            document.getElementById(`explanation-${questionIndex}`).classList.add('show');

            if (isCorrect) {
                score += 1;
            } else {
                score -= 0.2;
            }

            if (isCorrect && (questionIndex in userAnswers ? userAnswers[questionIndex] !== question.answer : true)) {
                correctAnswers++;
            } else if (!isCorrect && (questionIndex in userAnswers ? userAnswers[questionIndex] === question.answer : false)) {
                wrongAnswers++;
            }

            updateScore();
            updateNavigationButtons();
        }

        function skipQuestion() {
            const startIndex = currentPage * questionsPerPage;
            const currentQuestion = startIndex + Object.keys(userAnswers).filter(k => k >= startIndex && k < startIndex + questionsPerPage).length;
            if (currentQuestion < (currentPage + 1) * questionsPerPage) {
                userAnswers[currentQuestion] = 'skipped';
                skippedQuestions++;
                document.getElementById(`question-${currentQuestion}`).classList.add('skipped');
                updateScore();
                updateNavigationButtons();
                if (currentQuestion < (currentPage + 1) * questionsPerPage - 1) {
                    loadPage();
                } else {
                    nextPage();
                }
            }
        }

        function nextPage() {
            if (currentPage < totalPages - 1) {
                currentPage++;
                loadPage();
            } else {
                showResults();
            }
        }

        function previousPage() {
            if (currentPage > 0) {
                currentPage--;
                loadPage();
            }
        }

        function updateProgress() {
            const progress = ((currentPage + 1) / totalPages) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('currentPage').textContent = currentPage + 1;
        }

        function updateScore() {
            const negative = Math.floor(wrongAnswers / 5) * 1;
            const totalScore = score - negative;
            document.getElementById('currentScore').textContent = Math.round(totalScore * 10) / 10;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const skipBtn = document.getElementById('skipBtn');

            prevBtn.disabled = currentPage === 0;
            nextBtn.disabled = currentPage === totalPages - 1;
            if (currentPage === totalPages - 1) {
                nextBtn.textContent = 'Finish Test';
            } else {
                nextBtn.textContent = 'Next ➡️';
            }

            const startIndex = currentPage * questionsPerPage;
            const endIndex = Math.min(startIndex + questionsPerPage, shuffledQuestions.length);
            let allAnswered = true;
            for (let i = startIndex; i < endIndex; i++) {
                if (!(i in userAnswers)) {
                    allAnswered = false;
                    break;
                }
            }
            skipBtn.style.display = allAnswered ? 'none' : 'block';
            nextBtn.disabled = !allAnswered && currentPage < totalPages - 1;
        }

        function showResults() {
            correctAnswers = 0;
            wrongAnswers = 0;
            skippedQuestions = 0;
            for (let i = 0; i < shuffledQuestions.length; i++) {
                if (userAnswers[i] === 'skipped' || !(i in userAnswers)) {
                    skippedQuestions++;
                } else if (userAnswers[i] === shuffledQuestions[i].answer) {
                    correctAnswers++;
                } else {
                    wrongAnswers++;
                }
            }
            score = correctAnswers - Math.floor(wrongAnswers / 5);

            document.getElementById('testArea').classList.add('hidden');
            document.getElementById('progressInfo').classList.add('hidden');
            document.getElementById('scoreDisplay').innerHTML = `
                <div style="color: #27ae60; font-size: 0.8em;">Final Score</div>
                ${Math.round(score * 10) / 10} / ${shuffledQuestions.length}
                <div style="color: #7f8c8d; font-size: 0.5em; margin-top: 10px;">
                    (${((correctAnswers / shuffledQuestions.length) * 100).toFixed(1)}% Correct)
                </div>
            `;
            document.getElementById('scoreBreakdown').innerHTML = `
                <div class="score-card correct">
                    <div class="score-number" style="color: #27ae60;">${correctAnswers}</div>
                    <div>Correct Answers</div>
                </div>
                <div class="score-card incorrect">
                    <div class="score-number" style="color: #e74c3c;">${wrongAnswers}</div>
                    <div>Wrong Answers</div>
                </div>
                <div class="score-card skipped">
                    <div class="score-number" style="color: #f39c12;">${skippedQuestions}</div>
                    <div>Skipped Questions</div>
                </div>
                <div class="score-card">
                    <div class="score-number" style="color: #3498db;">${Math.round(score * 10) / 10}</div>
                    <div>Net Score<br><small>(After -0.2 penalty)</small></div>
                </div>
            `;
            document.getElementById('resultsArea').classList.remove('hidden');
        }

        function restartTest() {
            document.getElementById('resultsArea').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('startScreen').classList.remove('hidden');
        });
    </script>
</body>
</html>
