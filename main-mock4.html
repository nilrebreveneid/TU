<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering Mock Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin: 0 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff87, #60efff);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .test-area {
            padding: 40px;
        }

        .question-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #3498db;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin: 20px 0;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
        }

        .option:hover {
            border-color: #3498db;
            background: #f8f9ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }

        .option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .option.correct {
            border-color: #27ae60;
            background: #d5f4e6;
            animation: correctPulse 0.6s ease;
        }

        .option.incorrect {
            border-color: #e74c3c;
            background: #fdeaea;
            animation: incorrectShake 0.6s ease;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .option-letter {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option.correct .option-letter {
            background: #27ae60;
        }

        .option.incorrect .option-letter {
            background: #e74c3c;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .results {
            text-align: center;
            padding: 40px;
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .score-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .score-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            border-top: 4px solid #3498db;
        }

        .score-card.correct {
            border-top-color: #27ae60;
        }

        .score-card.incorrect {
            border-top-color: #e74c3c;
        }

        .score-card.skipped {
            border-top-color: #f39c12;
        }

        .score-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .start-screen {
            text-align: center;
            padding: 60px 40px;
        }

        .start-screen h2 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .test-info {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
        }

        .test-info ul {
            list-style: none;
            padding: 0;
        }

        .test-info li {
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .test-info li:last-child {
            border-bottom: none;
        }

        .info-icon {
            width: 20px;
            height: 20px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 2em;
            }

            .test-area {
                padding: 20px;
            }

            .progress-info {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .controls {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                width: 100%;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Engineering Mock Test</h1>
            <div id="progressInfo" class="progress-info hidden">
                <div>Page <span id="currentPage">1</span> of 6</div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <div>Score: <span id="currentScore">0</span></div>
            </div>
        </div>

        <div id="startScreen" class="start-screen">
            <h2>Welcome to the Engineering Mock Test</h2>
            <div class="test-info">
                <ul>
                    <li>
                        <div class="info-icon">📝</div>
                        <div><strong>Total Questions:</strong> 60 MCQs covering various engineering topics</div>
                    </li>
                    <li>
                        <div class="info-icon">📄</div>
                        <div><strong>Format:</strong> 10 questions per page (6 pages total)</div>
                    </li>
                    <li>
                        <div class="info-icon">✅</div>
                        <div><strong>Scoring:</strong> +1 mark for correct answer</div>
                    </li>
                    <li>
                        <div class="info-icon">❌</div>
                        <div><strong>Negative Marking:</strong> -0.2 marks for wrong answer (5 wrong = -1 mark)</div>
                    </li>
                    <li>
                        <div class="info-icon">⏭️</div>
                        <div><strong>Skip Option:</strong> Skip questions you're unsure about</div>
                    </li>
                    <li>
                        <div class="info-icon">🔄</div>
                        <div><strong>Random Order:</strong> Questions shuffled on each refresh</div>
                    </li>
                    <li>
                        <div class="info-icon">💡</div>
                        <div><strong>Instant Feedback:</strong> Correct (green), Wrong (red)</div>
                    </li>
                </ul>
            </div>
            <button class="btn btn-primary" onclick="startTest()" style="font-size: 1.2em; padding: 15px 40px;">
                🚀 Start Test
            </button>
        </div>

        <div id="testArea" class="test-area hidden">
            <div id="questionContainer" class="question-container">
                <!-- Questions will be loaded here -->
            </div>
            <div class="controls">
                <button id="skipBtn" class="btn btn-warning" onclick="skipQuestion()">
                    ⏭️ Skip Question
                </button>
                <div>
                    <button id="prevBtn" class="btn btn-secondary" onclick="previousPage()" disabled>
                        ⬅️ Previous
                    </button>
                    <button id="nextBtn" class="btn btn-primary" onclick="nextPage()" disabled>
                        ${currentPage === 5 ? 'Finish Test' : 'Next ➡️'}
                    </button>
                </div>
            </div>
        </div>

        <div id="resultsArea" class="results hidden">
            <h2>🎉 Test Complete!</h2>
            <div id="scoreDisplay" class="score-display"></div>
            <div id="scoreBreakdown" class="score-breakdown"></div>
            <button class="btn btn-primary" onclick="restartTest()" style="margin-top: 30px;">
                🔄 Take Test Again
            </button>
        </div>
    </div>

    <script>
        const questions = [
            { q: "What is the primary function of a shock absorber in a vehicle?", options: ["To increase speed", "To dampen vibrations", "To generate power", "To store fuel"], answer: 1, explanation: "A shock absorber reduces vibrations and stabilizes the vehicle by damping spring oscillations." }, // Easy - Automobiles
            { q: "Which principle explains the lift on an airplane wing?", options: ["Bernoulli's principle", "Newton's first law", "Archimedes' principle", "Pascal's law"], answer: 0, explanation: "Bernoulli's principle states that faster-moving air over the wing creates lower pressure, generating lift." }, // Easy - Fluid Mechanics
            { q: "What is the specific heat capacity of water at 25°C?", options: ["1.0 J/g·°C", "2.0 J/g·°C", "4.18 J/g·°C", "10 J/g·°C"], answer: 2, explanation: "Water's specific heat capacity is approximately 4.18 J/g·°C at 25°C." }, // Easy - Thermodynamics
            { q: "Which alloy is commonly used in aircraft construction?", options: ["Cast iron", "Aluminum alloy", "Lead", "Brass"], answer: 1, explanation: "Aluminum alloy is lightweight and strong, making it ideal for aircraft." }, // Easy - Material Science
            { q: "What is the purpose of an invoice in record keeping?", options: ["To design parts", "To document a sale", "To maintain tools", "To schedule meetings"], answer: 1, explanation: "An invoice records details of a sale, including goods and payment terms." }, // Easy - Record Keeping
            { q: "Which safety equipment protects against falling objects?", options: ["Hard hat", "Gloves", "Goggles", "Earplugs"], answer: 0, explanation: "A hard hat shields the head from falling objects and impacts." }, // Easy - Safety Practice
            { q: "What is the purpose of a maintenance schedule?", options: ["To increase costs", "To plan regular upkeep", "To reduce staff", "To eliminate tools"], answer: 1, explanation: "A maintenance schedule organizes regular upkeep to prevent breakdowns." }, // Easy - Maintenance
            { q: "Which instrument is used to measure small distances in drawing?", options: ["Vernier caliper", "Ruler", "Compass", "Protractor"], answer: 0, explanation: "A vernier caliper provides precise measurements of small distances." }, // Easy - Workshop & Drawing
            { q: "What is the purpose of a profit margin analysis?", options: ["To design structures", "To evaluate project profitability", "To measure strength", "To calculate speed"], answer: 1, explanation: "Profit margin analysis assesses the financial viability of a project." }, // Easy - Engg Eco
            { q: "Which device measures the flow rate of a liquid?", options: ["Thermometer", "Flowmeter", "Barometer", "Manometer"], answer: 1, explanation: "A flowmeter quantifies the volume or mass of liquid passing through a point." }, // Easy - Fluid Mechanics
            { q: "What is the function of a connecting rod in an engine?", options: ["To store fuel", "To transfer motion from piston to crankshaft", "To cool the engine", "To generate electricity"], answer: 1, explanation: "The connecting rod links the piston to the crankshaft, converting motion." }, // Easy - Heat Engine
            { q: "Which type of load causes bending in a beam?", options: ["Axial load", "Transverse load", "Shear load", "Torsional load"], answer: 1, explanation: "A transverse load, applied perpendicularly, causes bending in a beam." }, // Easy - Engg Mechanics
            { q: "What is the purpose of a cutting fluid in machining?", options: ["To increase friction", "To lubricate and cool", "To add weight", "To change material"], answer: 1, explanation: "Cutting fluid lubricates and cools the tool and workpiece during machining." }, // Easy - Workshop & Drawing
            { q: "Which component regulates voltage in an alternator?", options: ["Rotor", "Voltage regulator", "Stator", "Diode"], answer: 1, explanation: "A voltage regulator maintains a consistent output voltage in an alternator." }, // Easy - Automobiles
            { q: "What is the maximum study leave duration under TU 2050 Rules?", options: ["6 months", "1 year", "2 years", "3 years"], answer: 1, explanation: "Study leave is granted for up to 1 year under TU 2050 Rules." }, // Easy - TU 2050 Rules
            { q: "Which gear type is used in non-parallel shaft applications?", options: ["Spur gear", "Helical gear", "Bevel gear", "Worm gear"], answer: 2, explanation: "Bevel gears are designed for transmitting motion between non-parallel shafts." }, // Mid-Hard - Automobiles
            { q: "What is the hydraulic gradient in an open channel flow?", options: ["Slope of the water surface", "Slope of the channel bed", "Difference in pressure", "Velocity gradient"], answer: 0, explanation: "The hydraulic gradient is the slope of the water surface in open channel flow." }, // Mid-Hard - Fluid Mechanics
            { q: "Which factor limits the efficiency of a real Carnot cycle?", options: ["Friction", "Heat losses", "Irreversibilities", "All of the above"], answer: 3, explanation: "Real Carnot cycle efficiency is reduced by friction, heat losses, and irreversibilities." }, // Mid-Hard - Thermodynamics
            { q: "What is the purpose of normalizing heat treatment?", options: ["To increase hardness", "To refine grain structure", "To remove stresses", "To soften material"], answer: 1, explanation: "Normalizing refines the grain structure of steel for improved strength." }, // Mid-Hard - Material Science
            { q: "Which technique uses infrared thermography in maintenance?", options: ["Vibration analysis", "Thermal imaging", "Ultrasonic testing", "Oil analysis"], answer: 1, explanation: "Infrared thermography detects heat anomalies to predict equipment failure." }, // Mid-Hard - Maintenance
            { q: "What is the purpose of an isometric view in technical drawing?", options: ["To show top view only", "To represent 3D objects in 2D", "To measure angles", "To draw curves"], answer: 1, explanation: "An isometric view depicts a 3D object in 2D with equal foreshortening." }, // Mid-Hard - Workshop & Drawing
            { q: "Which method uses a discount rate to evaluate cash flows?", options: ["Payback period", "Internal rate of return (IRR)", "Net present value (NPV)", "Break-even point"], answer: 2, explanation: "NPV uses a discount rate to evaluate the present value of future cash flows." }, // Mid-Hard - Engg Eco
            { q: "What is the Mach number for supersonic flow?", options: ["< 0.8", "0.8 - 1.2", "> 1.0", "< 0.3"], answer: 2, explanation: "Supersonic flow occurs when the Mach number exceeds 1.0, faster than sound." }, // Hard - Fluid Mechanics
            { q: "Which parameter determines the power output of a turbine?", options: ["Mass flow rate", "Temperature gradient", "Pressure difference", "All of the above"], answer: 3, explanation: "Power output depends on mass flow rate, temperature, and pressure differences." }, // Hard - Heat Engine
            { q: "What is the equation for deflection in a simply supported beam?", options: ["δ = PL³/3EI", "δ = PL²/2EI", "δ = 5PL³/48EI", "δ = PL/4EI"], answer: 2, explanation: "For a central point load, deflection is δ = 5PL³/48EI, where P is load, L is length, E is modulus, and I is moment of inertia." }, // Hard - Engg Mechanics
            { q: "Which element improves the wear resistance of steel?", options: ["Carbon", "Manganese", "Vanadium", "Silicon"], answer: 2, explanation: "Vanadium forms carbides, enhancing wear resistance in steel." }, // Hard - Material Science
            { q: "What is the entropy change in an irreversible process?", options: ["Always zero", "Always positive", "Always negative", "Depends on temperature"], answer: 1, explanation: "Entropy increases in an irreversible process due to energy dissipation." }, // Hard - Thermodynamics
            { q: "Which regulation requires fire drills in TU workplaces?", options: ["Nepal Fire Act", "TU 2050 Rules", "Labor Safety Code", "Building Code"], answer: 1, explanation: "TU 2050 Rules mandate fire drills to ensure workplace safety." }, // Hard - Safety Practice
            { q: "What is the primary function of a universal joint?", options: ["To change gear ratios", "To transmit power at angles", "To store energy", "To reduce weight"], answer: 1, explanation: "A universal joint transmits torque between shafts at varying angles." }, // Easy - Automobiles
            { q: "Which factor affects the buoyancy of an object?", options: ["Shape", "Density of fluid", "Color", "Temperature"], answer: 1, explanation: "Buoyancy depends on the density of the fluid the object is submerged in." }, // Easy - Fluid Mechanics
            { q: "What is the purpose of a condenser in a refrigeration cycle?", options: ["To compress gas", "To release heat", "To absorb heat", "To expand gas"], answer: 1, explanation: "A condenser releases heat from the refrigerant, turning it into a liquid." }, // Easy - Heat Engine
            { q: "Which property determines a material's ability to be drawn into wires?", options: ["Hardness", "Ductility", "Brittleness", "Toughness"], answer: 1, explanation: "Ductility allows a material to be drawn into wires without breaking." }, // Easy - Material Science
            { q: "What is the purpose of a voucher in record keeping?", options: ["To design machines", "To authorize payments", "To maintain tools", "To schedule work"], answer: 1, explanation: "A voucher authorizes and documents payment transactions." }, // Easy - Record Keeping
            { q: "Which safety measure prevents chemical spills?", options: ["Wearing gloves", "Using spill kits", "Using ear protection", "Wearing goggles"], answer: 1, explanation: "Spill kits contain and clean chemical spills to prevent hazards." }, // Easy - Safety Practice
            { q: "What is the purpose of a lubrication schedule?", options: ["To increase friction", "To ensure regular lubrication", "To reduce costs", "To eliminate maintenance"], answer: 1, explanation: "A lubrication schedule ensures machinery operates smoothly with regular oiling." }, // Easy - Maintenance
            { q: "Which tool is used to transfer measurements in drawing?", options: ["Divider", "Ruler", "Compass", "Set square"], answer: 0, explanation: "A divider transfers precise measurements between points in technical drawing." }, // Easy - Workshop & Drawing
            { q: "What is the purpose of a sensitivity analysis in engineering economics?", options: ["To design bridges", "To assess project risks", "To measure strength", "To calculate speed"], answer: 1, explanation: "Sensitivity analysis evaluates how changes in variables affect project outcomes." }, // Easy - Engg Eco
            { q: "Which component controls the ignition timing in an engine?", options: ["Carburetor", "Distributor", "Flywheel", "Piston"], answer: 1, explanation: "The distributor controls the timing of the spark for ignition." }, // Easy - Heat Engine
            { q: "What is the primary function of a tie rod in a structure?", options: ["To support weight", "To resist tension", "To store water", "To measure height"], answer: 1, explanation: "A tie rod resists tensile forces to stabilize a structure." }, // Easy - Engg Mechanics


              { q: "त्रिभुवन विश्वविद्यालयको नियमावली कुन बिक्रम संवत् वर्षमा जारी भएको हो?", options: ["२०४५ वि.सं.", "२०५० वि.सं.", "२०६० वि.सं.", "२०४० वि.सं."], answer: 1, explanation: "२०५० वि.सं. मा जारी भएको हो।" },
      { q: "त्रिभुवन विश्वविद्यालयको सेवा आयोगको बैठक कसले बोलाउँछ?", options: ["उपकुलपति", "अध्यक्ष", "रजिष्ट्रार", "सभा"], answer: 1, explanation: "अध्यक्षले बैठक बोलाउँछ।" },
      { q: "त्रिभुवन विश्वविद्यालयमा कति दिनको घर विदा वार्षिक रूपमा दिइन्छ?", options: ["१५ दिन", "२० दिन", "३० दिन", "४५ दिन"], answer: 2, explanation: "३० दिनको घर विदा दिइन्छ।" },
      { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कुन समूहको वरियता पहिलो छ?", options: ["प्रशिक्षण समूह", "प्रशासन समूह", "प्राविधिक समूह", "लेखा समूह"], answer: 0, explanation: "प्रशिक्षण समूहको वरियता पहिलो छ।" },
      { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कति प्रकारका सजाय उल्लेख छन्?", options: ["३", "४", "५", "६"], answer: 1, explanation: "४ प्रकारका सजाय छन्।" },
      { q: "त्रिभुवन विश्वविद्यालयमा कति वर्ष सेवा गरेपछि निवृत्तिभरण पाइन्छ?", options: ["१० वर्ष", "१५ वर्ष", "२० वर्ष", "२५ वर्ष"], answer: 2, explanation: "२० वर्षपछि निवृत्तिभरण पाइन्छ।" },
      { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कुन विदा पहिलो उल्लेख छ?", options: ["घर विदा", "बिरामी विदा", "प्रसूति विदा", "पर्व विदा"], answer: 0, explanation: "घर विदा पहिलो उल्लेख छ।" },
      { q: "त्रिभुवन विश्वविद्यालयको नियमावलीमा कुन निकायले तलब निर्धारण गर्छ?", options: ["सभा", "कार्यकारी परिषद्", "सेवा आयोग", "रजिष्ट्रार"], answer: 0, explanation: "सभाले तलब निर्धारण गर्छ।" },
        ];

        let shuffledQuestions = [];
        let currentPage = 0;
        let userAnswers = {};
        let score = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let skippedQuestions = 0;
        const questionsPerPage = 10;
        const totalPages = 6;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startTest() {
            shuffledQuestions = shuffleArray([...questions]);
            currentPage = 0;
            userAnswers = {};
            score = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            skippedQuestions = 0;

            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testArea').classList.remove('hidden');
            document.getElementById('progressInfo').classList.remove('hidden');
            loadPage();
        }

        function loadPage() {
            const startIndex = currentPage * questionsPerPage;
            const endIndex = Math.min(startIndex + questionsPerPage, shuffledQuestions.length);
            let html = '';
            for (let i = startIndex; i < endIndex; i++) {
                const q = shuffledQuestions[i];
                html += `
                    <div class="question-container" id="question-${i}">
                        <div class="question-header">
                            <div class="question-number">Question ${i + 1}</div>
                        </div>
                        <div class="question-text">${q.q}</div>
                        <div class="options-container">
                            ${q.options.map((opt, idx) => `
                                <div class="option" onclick="selectOption(${i}, ${idx})" id="option-${i}-${idx}">
                                    <div class="option-letter">${String.fromCharCode(65 + idx)}</div>
                                    <div>${opt}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="explanation" id="explanation-${i}">
                            <h4>💡 Explanation:</h4>
                            <p>${q.explanation}</p>
                        </div>
                    </div>
                `;
            }

            document.getElementById('questionContainer').innerHTML = html;
            updateProgress();
            updateScore();
            updateNavigationButtons();
        }

        function selectOption(questionIndex, optionIndex) {
            const question = shuffledQuestions[questionIndex];
            const isCorrect = optionIndex === question.answer;

            userAnswers[questionIndex] = optionIndex;

            const options = document.querySelectorAll(`#question-${questionIndex} .option`);
            options.forEach((opt, idx) => {
                opt.classList.remove('selected', 'correct', 'incorrect', 'disabled');
                if (idx === optionIndex) opt.classList.add('selected');
                if (idx === question.answer) opt.classList.add('correct');
                else if (idx === optionIndex && !isCorrect) opt.classList.add('incorrect');
                opt.classList.add('disabled');
            });

            document.getElementById(`explanation-${questionIndex}`).classList.add('show');

            if (isCorrect) {
                score += 1;
            } else {
                score -= 0.2;
            }

            if (isCorrect && (questionIndex in userAnswers ? userAnswers[questionIndex] !== question.answer : true)) {
                correctAnswers++;
            } else if (!isCorrect && (questionIndex in userAnswers ? userAnswers[questionIndex] === question.answer : false)) {
                wrongAnswers++;
            }

            updateScore();
            updateNavigationButtons();
        }

        function skipQuestion() {
            const startIndex = currentPage * questionsPerPage;
            const currentQuestion = startIndex + Object.keys(userAnswers).filter(k => k >= startIndex && k < startIndex + questionsPerPage).length;
            if (currentQuestion < (currentPage + 1) * questionsPerPage) {
                userAnswers[currentQuestion] = 'skipped';
                skippedQuestions++;
                document.getElementById(`question-${currentQuestion}`).classList.add('skipped');
                updateScore();
                updateNavigationButtons();
                if (currentQuestion < (currentPage + 1) * questionsPerPage - 1) {
                    loadPage();
                } else {
                    nextPage();
                }
            }
        }

        function nextPage() {
            if (currentPage < totalPages - 1) {
                currentPage++;
                loadPage();
            } else {
                showResults();
            }
        }

        function previousPage() {
            if (currentPage > 0) {
                currentPage--;
                loadPage();
            }
        }

        function updateProgress() {
            const progress = ((currentPage + 1) / totalPages) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('currentPage').textContent = currentPage + 1;
        }

        function updateScore() {
            const negative = Math.floor(wrongAnswers / 5) * 1;
            const totalScore = score - negative;
            document.getElementById('currentScore').textContent = Math.round(totalScore * 10) / 10;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const skipBtn = document.getElementById('skipBtn');

            prevBtn.disabled = currentPage === 0;
            nextBtn.disabled = currentPage === totalPages - 1;
            if (currentPage === totalPages - 1) {
                nextBtn.textContent = 'Finish Test';
            } else {
                nextBtn.textContent = 'Next ➡️';
            }

            const startIndex = currentPage * questionsPerPage;
            const endIndex = Math.min(startIndex + questionsPerPage, shuffledQuestions.length);
            let allAnswered = true;
            for (let i = startIndex; i < endIndex; i++) {
                if (!(i in userAnswers)) {
                    allAnswered = false;
                    break;
                }
            }
            skipBtn.style.display = allAnswered ? 'none' : 'block';
            nextBtn.disabled = !allAnswered && currentPage < totalPages - 1;
        }

        function showResults() {
            correctAnswers = 0;
            wrongAnswers = 0;
            skippedQuestions = 0;
            for (let i = 0; i < shuffledQuestions.length; i++) {
                if (userAnswers[i] === 'skipped' || !(i in userAnswers)) {
                    skippedQuestions++;
                } else if (userAnswers[i] === shuffledQuestions[i].answer) {
                    correctAnswers++;
                } else {
                    wrongAnswers++;
                }
            }
            score = correctAnswers - Math.floor(wrongAnswers / 5);

            document.getElementById('testArea').classList.add('hidden');
            document.getElementById('progressInfo').classList.add('hidden');
            document.getElementById('scoreDisplay').innerHTML = `
                <div style="color: #27ae60; font-size: 0.8em;">Final Score</div>
                ${Math.round(score * 10) / 10} / ${shuffledQuestions.length}
                <div style="color: #7f8c8d; font-size: 0.5em; margin-top: 10px;">
                    (${((correctAnswers / shuffledQuestions.length) * 100).toFixed(1)}% Correct)
                </div>
            `;
            document.getElementById('scoreBreakdown').innerHTML = `
                <div class="score-card correct">
                    <div class="score-number" style="color: #27ae60;">${correctAnswers}</div>
                    <div>Correct Answers</div>
                </div>
                <div class="score-card incorrect">
                    <div class="score-number" style="color: #e74c3c;">${wrongAnswers}</div>
                    <div>Wrong Answers</div>
                </div>
                <div class="score-card skipped">
                    <div class="score-number" style="color: #f39c12;">${skippedQuestions}</div>
                    <div>Skipped Questions</div>
                </div>
                <div class="score-card">
                    <div class="score-number" style="color: #3498db;">${Math.round(score * 10) / 10}</div>
                    <div>Net Score<br><small>(After -0.2 penalty)</small></div>
                </div>
            `;
            document.getElementById('resultsArea').classList.remove('hidden');
        }

        function restartTest() {
            document.getElementById('resultsArea').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('startScreen').classList.remove('hidden');
        });
    </script>
</body>
</html>
