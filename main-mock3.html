<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering Mock Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin: 0 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff87, #60efff);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .test-area {
            padding: 40px;
        }

        .question-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #3498db;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin: 20px 0;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
        }

        .option:hover {
            border-color: #3498db;
            background: #f8f9ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }

        .option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .option.correct {
            border-color: #27ae60;
            background: #d5f4e6;
            animation: correctPulse 0.6s ease;
        }

        .option.incorrect {
            border-color: #e74c3c;
            background: #fdeaea;
            animation: incorrectShake 0.6s ease;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .option-letter {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option.correct .option-letter {
            background: #27ae60;
        }

        .option.incorrect .option-letter {
            background: #e74c3c;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .results {
            text-align: center;
            padding: 40px;
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .score-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .score-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            border-top: 4px solid #3498db;
        }

        .score-card.correct {
            border-top-color: #27ae60;
        }

        .score-card.incorrect {
            border-top-color: #e74c3c;
        }

        .score-card.skipped {
            border-top-color: #f39c12;
        }

        .score-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .start-screen {
            text-align: center;
            padding: 60px 40px;
        }

        .start-screen h2 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .test-info {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
        }

        .test-info ul {
            list-style: none;
            padding: 0;
        }

        .test-info li {
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .test-info li:last-child {
            border-bottom: none;
        }

        .info-icon {
            width: 20px;
            height: 20px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 2em;
            }

            .test-area {
                padding: 20px;
            }

            .progress-info {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .controls {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                width: 100%;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Engineering Mock Test</h1>
            <div id="progressInfo" class="progress-info hidden">
                <div>Page <span id="currentPage">1</span> of 7</div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <div>Score: <span id="currentScore">0</span></div>
            </div>
        </div>

        <div id="startScreen" class="start-screen">
            <h2>Welcome to the Engineering Mock Test</h2>
            <div class="test-info">
                <ul>
                    <li>
                        <div class="info-icon">📝</div>
                        <div><strong>Total Questions:</strong> 67 MCQs covering various engineering topics</div>
                    </li>
                    <li>
                        <div class="info-icon">📄</div>
                        <div><strong>Format:</strong> 10 questions per page (7 pages total)</div>
                    </li>
                    <li>
                        <div class="info-icon">✅</div>
                        <div><strong>Scoring:</strong> +1 mark for correct answer</div>
                    </li>
                    <li>
                        <div class="info-icon">❌</div>
                        <div><strong>Negative Marking:</strong> -0.2 marks for wrong answer (5 wrong = -1 mark)</div>
                    </li>
                    <li>
                        <div class="info-icon">⏭️</div>
                        <div><strong>Skip Option:</strong> Skip questions you're unsure about</div>
                    </li>
                    <li>
                        <div class="info-icon">🔄</div>
                        <div><strong>Random Order:</strong> Questions shuffled on each refresh</div>
                    </li>
                    <li>
                        <div class="info-icon">💡</div>
                        <div><strong>Instant Feedback:</strong> Correct (green), Wrong (red)</div>
                    </li>
                </ul>
            </div>
            <button class="btn btn-primary" onclick="startTest()" style="font-size: 1.2em; padding: 15px 40px;">
                🚀 Start Test
            </button>
        </div>

        <div id="testArea" class="test-area hidden">
            <div id="questionContainer" class="question-container">
                <!-- Questions will be loaded here -->
            </div>
            <div class="controls">
                <button id="skipBtn" class="btn btn-warning" onclick="skipQuestion()">
                    ⏭️ Skip Question
                </button>
                <div>
                    <button id="prevBtn" class="btn btn-secondary" onclick="previousPage()" disabled>
                        ⬅️ Previous
                    </button>
                    <button id="nextBtn" class="btn btn-primary" onclick="nextPage()" disabled>
                        ${currentPage === 6 ? 'Finish Test' : 'Next ➡️'}
                    </button>
                </div>
            </div>
        </div>

        <div id="resultsArea" class="results hidden">
            <h2>🎉 Test Complete!</h2>
            <div id="scoreDisplay" class="score-display"></div>
            <div id="scoreBreakdown" class="score-breakdown"></div>
            <button class="btn btn-primary" onclick="restartTest()" style="margin-top: 30px;">
                🔄 Take Test Again
            </button>
        </div>
    </div>

    <script>
        const questions = [
            { q: "What is the primary function of a flywheel in an engine?", options: ["To generate electricity", "To store kinetic energy", "To cool the engine", "To filter oil"], answer: 1, explanation: "A flywheel stores kinetic energy during the power stroke to smooth out engine operation." }, // Easy - Automobiles
            { q: "Which type of fluid flow has a constant velocity at a given point?", options: ["Turbulent", "Laminar", "Transitional", "Chaotic"], answer: 1, explanation: "Laminar flow features smooth, constant velocity layers with no mixing." }, // Easy - Fluid Mechanics
            { q: "What is the unit of thermal conductivity?", options: ["W/m·K", "J/kg·K", "Pa·s", "N/m²"], answer: 0, explanation: "Thermal conductivity is measured in watts per meter-kelvin (W/m·K)." }, // Easy - Thermodynamics
            { q: "Which material is known for its high corrosion resistance?", options: ["Iron", "Stainless steel", "Copper", "Aluminum"], answer: 1, explanation: "Stainless steel resists corrosion due to its chromium content." }, // Easy - Material Science
            { q: "What is the purpose of a ledger in record keeping?", options: ["To design blueprints", "To record financial transactions", "To maintain tools", "To schedule maintenance"], answer: 1, explanation: "A ledger tracks all financial transactions for accounting purposes." }, // Easy - Record Keeping
            { q: "Which safety gear is essential for welding?", options: ["Gloves", "Welding helmet", "Earplugs", "Shoes"], answer: 1, explanation: "A welding helmet protects the eyes and face from intense light and sparks." }, // Easy - Safety Practice
            { q: "What is the main advantage of preventive maintenance?", options: ["Reduces initial cost", "Extends equipment life", "Increases downtime", "Eliminates inspections"], answer: 1, explanation: "Preventive maintenance prolongs equipment life by addressing issues early." }, // Easy - Maintenance
            { q: "Which drawing tool is used to draw parallel lines?", options: ["Compass", "T-square", "Protractor", "Divider"], answer: 1, explanation: "A T-square ensures accurate parallel lines in technical drawings." }, // Easy - Workshop & Drawing
            { q: "What is the break-even point in engineering economics?", options: ["Total revenue equals total cost", "Maximum profit point", "Minimum loss point", "Total sales point"], answer: 0, explanation: "The break-even point occurs when revenue equals total costs, with no profit or loss." }, // Easy - Engg Eco
            { q: "Which force acts perpendicular to the surface in fluid mechanics?", options: ["Shear force", "Pressure force", "Frictional force", "Gravitational force"], answer: 1, explanation: "Pressure force acts perpendicular to the surface, independent of direction." }, // Easy - Fluid Mechanics
            { q: "What is the primary source of energy in a gas turbine?", options: ["Nuclear reaction", "Combustion of fuel", "Hydraulic pressure", "Electric current"], answer: 1, explanation: "A gas turbine uses the energy from fuel combustion to drive the turbine." }, // Easy - Heat Engine
            { q: "Which component of a truss resists tension?", options: ["Bottom chord", "Top chord", "Diagonal brace", "Vertical member"], answer: 0, explanation: "The bottom chord of a truss typically resists tensile forces." }, // Easy - Engg Mechanics
            { q: "What is the purpose of a coolant in machining?", options: ["To increase friction", "To reduce heat and wear", "To add weight", "To change color"], answer: 1, explanation: "Coolants reduce heat and wear on tools and workpieces during machining." }, // Easy - Workshop & Drawing
            { q: "Which rule governs the flow of current in a circuit?", options: ["Ohm's Law", "Newton's Law", "Boyle's Law", "Charles's Law"], answer: 0, explanation: "Ohm's Law (V = IR) governs the relationship between voltage, current, and resistance." }, // Easy - Automobiles
            { q: "What is the minimum age for TU 2050 Rules retirement?", options: ["55 years", "60 years", "65 years", "70 years"], answer: 1, explanation: "Under TU 2050 Rules, retirement is mandatory at 60 years." }, // Easy - TU 2050 Rules
            { q: "Which type of gear has teeth cut at an angle?", options: ["Spur gear", "Helical gear", "Bevel gear", "Worm gear"], answer: 1, explanation: "Helical gears have angled teeth, providing smoother and quieter operation." }, // Mid-Hard - Automobiles
            { q: "What is the Reynolds number range for turbulent flow in pipes?", options: ["< 2000", "2000 - 4000", "> 4000", "1000 - 2000"], answer: 2, explanation: "Turbulent flow typically occurs when the Reynolds number exceeds 4000." }, // Mid-Hard - Fluid Mechanics
            { q: "Which cycle has the highest theoretical efficiency?", options: ["Otto cycle", "Diesel cycle", "Carnot cycle", "Rankine cycle"], answer: 2, explanation: "The Carnot cycle offers the highest theoretical efficiency between two temperature limits." }, // Mid-Hard - Thermodynamics
            { q: "What is the carbon content range for medium carbon steel?", options: ["0.05% - 0.25%", "0.25% - 0.60%", "0.60% - 1.5%", "1.5% - 2.0%"], answer: 1, explanation: "Medium carbon steel contains 0.25% to 0.60% carbon, balancing strength and ductility." }, // Mid-Hard - Material Science
            { q: "Which maintenance strategy uses vibration analysis?", options: ["Reactive maintenance", "Predictive maintenance", "Preventive maintenance", "Corrective maintenance"], answer: 1, explanation: "Predictive maintenance uses vibration analysis to predict equipment failure." }, // Mid-Hard - Maintenance
            { q: "What is the purpose of a sectional view in technical drawing?", options: ["To show external features", "To reveal internal details", "To measure dimensions", "To add color"], answer: 1, explanation: "A sectional view cuts through an object to display internal components clearly." }, // Mid-Hard - Workshop & Drawing
            { q: "Which economic method evaluates project profitability over time?", options: ["Payback period", "Net present value (NPV)", "Break-even analysis", "Cost-benefit ratio"], answer: 1, explanation: "NPV assesses profitability by discounting future cash flows to present value." }, // Mid-Hard - Engg Eco
            { q: "What is the critical pressure ratio for choked flow in a nozzle?", options: ["0.528", "0.546", "0.577", "0.6"], answer: 0, explanation: "The critical pressure ratio for choked flow is approximately 0.528 for an ideal gas." }, // Hard - Fluid Mechanics
            { q: "Which parameter affects the efficiency of a heat engine most significantly?", options: ["Mass of fuel", "Temperature difference", "Volume of cylinder", "Speed of piston"], answer: 1, explanation: "Efficiency depends heavily on the temperature difference between heat source and sink." }, // Hard - Heat Engine
            { q: "What is the maximum shear stress in a circular shaft under torsion?", options: ["τ = Tc/J", "τ = Mc/I", "τ = F/A", "τ = σ/2"], answer: 0, explanation: "Maximum shear stress in torsion is given by τ = Tc/J, where T is torque, c is radius, and J is polar moment of inertia." }, // Hard - Engg Mechanics
            { q: "Which alloy improves the creep resistance of steel?", options: ["Nickel", "Chromium", "Molybdenum", "Titanium"], answer: 2, explanation: "Molybdenum enhances creep resistance by stabilizing the steel’s microstructure at high temperatures." }, // Hard - Material Science
            { q: "What is the effect of increasing the compression ratio in an Otto cycle?", options: ["Decreases thermal efficiency", "Increases thermal efficiency", "No change in efficiency", "Reduces power output"], answer: 1, explanation: "Higher compression ratio increases the Otto cycle efficiency due to greater work per cycle." }, // Hard - Thermodynamics
            { q: "Which safety standard requires regular equipment inspection in Nepal?", options: ["ISO 9001", "OSHA 18001", "Nepal Labor Act", "TU 2050 Rules"], answer: 2, explanation: "The Nepal Labor Act mandates regular equipment inspections to ensure workplace safety." }, // Hard - Safety Practice
            { q: "What is the formula for the moment of inertia of a rectangular section?", options: ["I = bh³/12", "I = bh²/12", "I = b²h/12", "I = bh/12"], answer: 0, explanation: "For a rectangle, I = bh³/12, where b is width and h is height about the centroidal axis." }, // Mid-Hard - Engg Mechanics
            { q: "Which lubricant is best for high-temperature applications?", options: ["Mineral oil", "Synthetic oil", "Grease", "Water-based fluid"], answer: 1, explanation: "Synthetic oil withstands high temperatures better due to its chemical stability." }, // Mid-Hard - Maintenance
            { q: "What is the primary function of a differential in a vehicle?", options: ["To change gears", "To allow wheels to rotate at different speeds", "To increase engine power", "To reduce friction"], answer: 1, explanation: "A differential enables the wheels to rotate at different speeds, especially during turns." }, // Easy - Automobiles
            { q: "Which property of a fluid affects its flow rate in a pipe?", options: ["Density", "Viscosity", "Temperature", "Color"], answer: 1, explanation: "Viscosity determines the fluid’s resistance to flow, impacting the rate in a pipe." }, // Easy - Fluid Mechanics
            { q: "What is the purpose of a superheater in a boiler?", options: ["To cool steam", "To increase steam temperature", "To remove water", "To generate pressure"], answer: 1, explanation: "A superheater raises steam temperature above saturation for better efficiency." }, // Easy - Heat Engine
            { q: "Which test measures the hardness of materials?", options: ["Tensile test", "Brinell hardness test", "Impact test", "Fatigue test"], answer: 1, explanation: "The Brinell test uses a hardened ball to measure a material’s hardness." }, // Easy - Material Science
            { q: "What is the purpose of a journal in record keeping?", options: ["To design machines", "To record daily transactions", "To maintain tools", "To schedule meetings"], answer: 1, explanation: "A journal logs daily financial transactions in chronological order." }, // Easy - Record Keeping
            { q: "Which safety sign indicates a fire extinguisher location?", options: ["Red circle", "Green square", "Yellow triangle", "Blue diamond"], answer: 0, explanation: "A red circle with a white background typically marks a fire extinguisher location." }, // Easy - Safety Practice
            { q: "What is the benefit of using a checklist in maintenance?", options: ["Reduces training time", "Ensures all tasks are completed", "Increases repair cost", "Eliminates tools"], answer: 1, explanation: "A checklist ensures all maintenance tasks are systematically addressed." }, // Easy - Maintenance
            { q: "Which tool is used to draw circles in technical drawing?", options: ["Ruler", "Compass", "Set square", "Protractor"], answer: 1, explanation: "A compass is used to draw accurate circles and arcs in technical drawings." }, // Easy - Workshop & Drawing
            { q: "What is the purpose of a cash flow statement in engineering economics?", options: ["To design structures", "To track money movement", "To measure strength", "To calculate speed"], answer: 1, explanation: "A cash flow statement tracks the inflow and outflow of money in a project." }, // Easy - Engg Eco
            { q: "Which component regulates the engine speed in a governor?", options: ["Flywheel", "Carburetor", "Governor spring", "Piston"], answer: 2, explanation: "The governor spring adjusts the engine speed by controlling fuel intake." }, // Easy - Heat Engine
            { q: "What is the primary function of a beam in a structure?", options: ["To support weight", "To store water", "To generate power", "To measure distance"], answer: 0, explanation: "A beam supports loads and transfers them to columns or walls." }, // Easy - Engg Mechanics
            { q: "Which type of brake uses friction pads?", options: ["Drum brake", "Disc brake", "Air brake", "Hand brake"], answer: 1, explanation: "Disc brakes use friction pads to slow or stop the vehicle." }, // Easy - Automobiles
            { q: "What is the effect of increasing pipe diameter on fluid flow?", options: ["Increases flow rate", "Decreases flow rate", "No change", "Reduces pressure"], answer: 0, explanation: "Larger pipe diameter reduces resistance, increasing flow rate." }, // Easy - Fluid Mechanics
            { q: "Which process improves the toughness of steel?", options: ["Annealing", "Quenching", "Tempering", "Hardening"], answer: 2, explanation: "Tempering reduces brittleness, enhancing steel’s toughness after quenching." }, // Easy - Material Science
            { q: "What is the purpose of a balance sheet in record keeping?", options: ["To track daily sales", "To show assets and liabilities", "To schedule maintenance", "To design parts"], answer: 1, explanation: "A balance sheet provides a snapshot of assets, liabilities, and equity." }, // Easy - Record Keeping
            { q: "Which safety device prevents electrical shocks?", options: ["Fuse", "Ground fault circuit interrupter (GFCI)", "Capacitor", "Resistor"], answer: 1, explanation: "A GFCI interrupts the circuit to prevent electrical shocks." }, // Easy - Safety Practice
            { q: "What is the advantage of predictive maintenance over reactive maintenance?", options: ["Lower cost", "Reduces unplanned downtime", "Requires less expertise", "Eliminates planning"], answer: 1, explanation: "Predictive maintenance uses data to prevent failures, reducing downtime." }, // Easy - Maintenance
            { q: "Which scale is used to measure angles in technical drawing?", options: ["Ruler", "Protractor", "Compass", "T-square"], answer: 1, explanation: "A protractor measures and draws angles accurately in technical drawings." }, // Easy - Workshop & Drawing
            { q: "What is the purpose of a depreciation schedule in engineering economics?", options: ["To increase revenue", "To calculate asset value over time", "To design machines", "To measure speed"], answer: 1, explanation: "A depreciation schedule tracks the declining value of assets over time." }, // Easy - Engg Eco
            { q: "Which valve controls the fuel-air mixture in a carburetor?", options: ["Throttle valve", "Check valve", "Relief valve", "Ball valve"], answer: 0, explanation: "The throttle valve regulates the fuel-air mixture entering the engine." }, // Easy - Heat Engine
            { q: "What is the primary function of a column in a building?", options: ["To support the roof", "To store water", "To generate heat", "To measure height"], answer: 0, explanation: "A column transfers loads from the roof to the foundation." }, // Easy - Engg Mechanics
            { q: "नयाँ नियुक्ति भएका कर्मचारीको परीक्षण काल कति हुन्छ?", options: ["६ महिना", "१ वर्ष", "२ वर्ष", "३ महिना"], answer: 1, explanation: "नयाँ नियुक्तिलाई १ वर्षको परीक्षण काल हुन्छ।" }, // Easy - TU 2050 Rules
            { q: "त्रिभुवन विश्वविद्यालयका कर्मचारीको सरुवा कसले स्वीकृत गर्छ?", options: ["सभा", "कार्यकारी परिषद्", "सेवा आयोग", "रजिष्ट्रार"], answer: 1, explanation: "कार्यकारी परिषद्ले सरुवाको स्वीकृति दिन्छ।" }, // Easy - TU 2050 Rules
            { q: "बढुवाका लागि न्यूनतम सेवा अवधि कति छ?", options: ["१० वर्ष", "१५ वर्ष", "२० वर्ष", "५ वर्ष"], answer: 1, explanation: "बढुवाका लागि १५ वर्ष सेवा आवश्यक छ।" }, // Mid-Hard - TU 2050 Rules
            { q: "गर्भवती महिलालाई कति दिनको प्रसूति विदा दिइन्छ?", options: ["बिरामी विदा", "प्रसूति विदा", "अध्ययन विदा", "आकस्मिक विदा"], answer: 1, explanation: "प्रसूति विदा ९५ दिनसम्म दिइन्छ।" }, // Mid-Hard - TU 2050 Rules
            { q: "त्रिभुवन विश्वविद्यालय सेवा आयोगको जिम्मेवारी के हो?", options: ["वित्तीय व्यवस्थापन", "नियुक्ति र बढुवा", "पाठ्यक्रम डिजाइन", "पूर्वाधार विकास"], answer: 1, explanation: "सेवा आयोगले नियुक्ति र बढुवाको जिम्मा लिन्छ।" }, // Easy - TU 2050 Rules
            { q: "वार्षिक रूपमा बिरामी विदाको अधिकतम अवधि कति छ?", options: ["१० दिन", "१५ दिन", "२० दिन", "३० दिन"], answer: 1, explanation: "बिरामी विदाको अधिकतम १५ दिन हुन्छ।" }, // Easy - TU 2050 Rules
            { q: "त्रिभुवन विश्वविद्यालयको विभाग वा क्याम्पसको प्रमुख को हो?", options: ["रजिष्ट्रार", "उपकुलपति", "प्रमुख", "डीन"], answer: 2, explanation: "प्रमुख विभाग वा क्याम्पसको नेतृत्व गर्छ।" }, // Easy - TU 2050 Rules
        ];

        let shuffledQuestions = [];
        let currentPage = 0;
        let userAnswers = {};
        let score = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let skippedQuestions = 0;
        const questionsPerPage = 10;
        const totalPages = 7;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Fixed syntax error
            }
            return array;
        }

        function startTest() {
            shuffledQuestions = shuffleArray([...questions]);
            currentPage = 0;
            userAnswers = {};
            score = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            skippedQuestions = 0;

            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testArea').classList.remove('hidden');
            document.getElementById('progressInfo').classList.remove('hidden');
            loadPage();
        }

        function loadPage() {
            const startIndex = currentPage * questionsPerPage;
            const endIndex = Math.min(startIndex + questionsPerPage, shuffledQuestions.length);
            let html = '';
            for (let i = startIndex; i < endIndex; i++) {
                const q = shuffledQuestions[i];
                html += `
                    <div class="question-container" id="question-${i}">
                        <div class="question-header">
                            <div class="question-number">Question ${i + 1}</div>
                        </div>
                        <div class="question-text">${q.q}</div>
                        <div class="options-container">
                            ${q.options.map((opt, idx) => `
                                <div class="option" onclick="selectOption(${i}, ${idx})" id="option-${i}-${idx}">
                                    <div class="option-letter">${String.fromCharCode(65 + idx)}</div>
                                    <div>${opt}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="explanation" id="explanation-${i}">
                            <h4>💡 Explanation:</h4>
                            <p>${q.explanation}</p>
                        </div>
                    </div>
                `;
            }

            document.getElementById('questionContainer').innerHTML = html;
            updateProgress();
            updateScore();
            updateNavigationButtons();
        }

        function selectOption(questionIndex, optionIndex) {
            const question = shuffledQuestions[questionIndex];
            const isCorrect = optionIndex === question.answer;

            userAnswers[questionIndex] = optionIndex;

            const options = document.querySelectorAll(`#question-${questionIndex} .option`);
            options.forEach((opt, idx) => {
                opt.classList.remove('selected', 'correct', 'incorrect', 'disabled');
                if (idx === optionIndex) opt.classList.add('selected');
                if (idx === question.answer) opt.classList.add('correct');
                else if (idx === optionIndex && !isCorrect) opt.classList.add('incorrect');
                opt.classList.add('disabled');
            });

            document.getElementById(`explanation-${questionIndex}`).classList.add('show');

            if (isCorrect) {
                score += 1;
            } else {
                score -= 0.2;
            }

            if (isCorrect && (questionIndex in userAnswers ? userAnswers[questionIndex] !== question.answer : true)) {
                correctAnswers++;
            } else if (!isCorrect && (questionIndex in userAnswers ? userAnswers[questionIndex] === question.answer : false)) {
                wrongAnswers++;
            }

            updateScore();
            updateNavigationButtons();
        }

        function skipQuestion() {
            const startIndex = currentPage * questionsPerPage;
            const currentQuestion = startIndex + Object.keys(userAnswers).filter(k => k >= startIndex && k < startIndex + questionsPerPage).length;
            if (currentQuestion < (currentPage + 1) * questionsPerPage) {
                userAnswers[currentQuestion] = 'skipped';
                skippedQuestions++;
                document.getElementById(`question-${currentQuestion}`).classList.add('skipped');
                updateScore();
                updateNavigationButtons();
                if (currentQuestion < (currentPage + 1) * questionsPerPage - 1) {
                    loadPage();
                } else {
                    nextPage();
                }
            }
        }

        function nextPage() {
            if (currentPage < totalPages - 1) {
                currentPage++;
                loadPage();
            } else {
                showResults();
            }
        }

        function previousPage() {
            if (currentPage > 0) {
                currentPage--;
                loadPage();
            }
        }

        function updateProgress() {
            const progress = ((currentPage + 1) / totalPages) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('currentPage').textContent = currentPage + 1;
        }

        function updateScore() {
            const negative = Math.floor(wrongAnswers / 5) * 1;
            const totalScore = score - negative;
            document.getElementById('currentScore').textContent = Math.round(totalScore * 10) / 10;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const skipBtn = document.getElementById('skipBtn');

            prevBtn.disabled = currentPage === 0;
            nextBtn.disabled = currentPage === totalPages - 1;
            if (currentPage === totalPages - 1) {
                nextBtn.textContent = 'Finish Test';
            } else {
                nextBtn.textContent = 'Next ➡️';
            }

            const startIndex = currentPage * questionsPerPage;
            const endIndex = Math.min(startIndex + questionsPerPage, shuffledQuestions.length);
            let allAnswered = true;
            for (let i = startIndex; i < endIndex; i++) {
                if (!(i in userAnswers)) {
                    allAnswered = false;
                    break;
                }
            }
            skipBtn.style.display = allAnswered ? 'none' : 'block';
            nextBtn.disabled = !allAnswered && currentPage < totalPages - 1;
        }

        function showResults() {
            correctAnswers = 0;
            wrongAnswers = 0;
            skippedQuestions = 0;
            for (let i = 0; i < shuffledQuestions.length; i++) {
                if (userAnswers[i] === 'skipped' || !(i in userAnswers)) {
                    skippedQuestions++;
                } else if (userAnswers[i] === shuffledQuestions[i].answer) {
                    correctAnswers++;
                } else {
                    wrongAnswers++;
                }
            }
            score = correctAnswers - Math.floor(wrongAnswers / 5);

            document.getElementById('testArea').classList.add('hidden');
            document.getElementById('progressInfo').classList.add('hidden');
            document.getElementById('scoreDisplay').innerHTML = `
                <div style="color: #27ae60; font-size: 0.8em;">Final Score</div>
                ${Math.round(score * 10) / 10} / ${shuffledQuestions.length}
                <div style="color: #7f8c8d; font-size: 0.5em; margin-top: 10px;">
                    (${((correctAnswers / shuffledQuestions.length) * 100).toFixed(1)}% Correct)
                </div>
            `;
            document.getElementById('scoreBreakdown').innerHTML = `
                <div class="score-card correct">
                    <div class="score-number" style="color: #27ae60;">${correctAnswers}</div>
                    <div>Correct Answers</div>
                </div>
                <div class="score-card incorrect">
                    <div class="score-number" style="color: #e74c3c;">${wrongAnswers}</div>
                    <div>Wrong Answers</div>
                </div>
                <div class="score-card skipped">
                    <div class="score-number" style="color: #f39c12;">${skippedQuestions}</div>
                    <div>Skipped Questions</div>
                </div>
                <div class="score-card">
                    <div class="score-number" style="color: #3498db;">${Math.round(score * 10) / 10}</div>
                    <div>Net Score<br><small>(After -0.2 penalty)</small></div>
                </div>
            `;
            document.getElementById('resultsArea').classList.remove('hidden');
        }

        function restartTest() {
            document.getElementById('resultsArea').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('startScreen').classList.remove('hidden');
        });
    </script>
</body>
</html>
